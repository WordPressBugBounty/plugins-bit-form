var he=Object.defineProperty,pe=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ae=(c,s,t)=>s in c?he(c,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[s]=t,P=(c,s)=>{for(var t in s||(s={}))je.call(s,t)&&ae(c,t,s[t]);if(se)for(var t of se(s))ge.call(s,t)&&ae(c,t,s[t]);return c},L=(c,s)=>pe(c,xe(s));import{f as F,j as e,_ as l,r as M,aq as V,aK as z,ce as S,E as Q,bp as te,W as ve,A as fe,a as ne,S as Z,T as G,b as H,g as be,I as U,u as ie,ar as Ne,e as _e,p as we,L as ke,c as ye,z as Fe,K as Se,O as Me}from"./main-861.js";import{E as ce,f as de,R as Re,a as Pe,p as qe}from"./bf-96-332.js";import{t as le}from"./bf-914-82.js";import{u as X}from"./bf-619-78.js";import{C as Y}from"./bf-8-105.js";import{C as O}from"./bf-857-79.js";import{M as me}from"./bf-528-113.js";const re=(c,s,t,i,r,n)=>{n(u=>F(u,j=>{j[c][s][i][t.target.name]=t.target.value}))};function D({i:c,type:s,formFields:t,field:i,dataConf:r,setDataConf:n,customFields:u}){const j={login:{propName:"login_map",fldName:"loginField"},reset:{propName:"reset_map",fldName:"resetField"},forgot:{propName:"forgot_map",fldName:"forgotField"}},{propName:o,fldName:h}=j[s],b=!!u.find(d=>d.key===i[h]&&d.required),k=(d,v)=>{const _=P({},r);_[s][o][v].customValue=d.target.value,n(_)};return e.jsx("div",{className:"flx mt-2 mr-1",children:e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp w-5 mr-2",name:"formField",value:i.formField||"",onChange:d=>re(s,o,d,c,r,n),children:[e.jsx("option",{value:"",children:l("Select Field")}),t.map(d=>d.type!=="file-up33"&&e.jsx("option",{value:d.key,children:d.name},`ff-zhcrm-${d.key}`)),e.jsx("option",{value:"custom",children:l("Custom...")})]}),i.formField==="custom"&&e.jsx(me,{onChange:d=>k(d,c),label:l("Custom Value"),className:"mr-2",type:"text",value:i.customValue,placeholder:l("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp w-5",name:h,value:i[h]||"",onChange:d=>re(s,o,d,c,r,n),disabled:b,children:[e.jsx("option",{value:"",children:l("Select Field")}),u==null?void 0:u.map(d=>e.jsx("option",{value:d.key,children:`${d.name}`},`${d.key}-1`))]})]})})}function Ee({fields:c,dataConf:s,setDataConf:t,pages:i,type:r,status:n}){var d,v,_,m,a;const[u,j]=M.useState(!1),o=V(z),h=[{key:"login",name:"Username or Email Address",required:!0}];M.useEffect(()=>{t(p=>F(p,x=>{var f,y,A;(A=(y=(f=x[r])==null?void 0:f.forgot_map)==null?void 0:y[0])!=null&&A.forgotField||(x[r].forgot_map=h.filter($=>$.required).map($=>({formField:"",forgotField:$.key,required:$.required})))}))},[]);const b=p=>{t(x=>F(x,f=>{const{name:y,value:A}=p.target;f[r][y]=A})),o(x=>L(P({},x),{unsaved:!0}))},k=p=>{t(x=>F(x,f=>{f[r].redirect_url=p.target.value})),o(x=>L(P({},x),{unsaved:!0}))};return e.jsxs("div",{style:{width:800,opacity:n===0&&.6,pointerEvents:n===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Forget Password Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Forgot Password Fields")})})]})]})}),(v=(d=s[r])==null?void 0:d.forgot_map)==null?void 0:v.map((p,x)=>e.jsx(D,{i:x,type:"forgot",field:p,formFields:c,dataConf:s,setDataConf:t,customFields:h},`analytics-m-${x+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsxs("div",{className:"f-m fw-500",children:[S("Redirect Page:"),e.jsx(O,{width:250,icnSize:17,className:"ml-1 mt-4 p-0",children:e.jsxs("div",{className:"txt-body",children:["This redirect page will be redirected to the reset form when the email is verified.",e.jsx("br",{})]})})]}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(_=s[r])==null?void 0:_.redirect_url,onChange:p=>k(p),children:[e.jsx("option",{value:"",children:S("Custom Link")}),i&&i.map((p,x)=>e.jsx("option",{value:p.url,children:p.title},`r-url-${x+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2 mt-5 fw-500",children:[e.jsxs("div",{className:"f-m",children:["Link"," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{onChange:b,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(m=s[r])==null?void 0:m.redirect_url})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx w-5  mt-4",children:[e.jsx("span",{role:"button",tabIndex:"-1",className:"cp",onClick:()=>j(!0),onKeyDown:()=>j(!0),children:e.jsx(Q,{size:21})}),e.jsx("div",{className:"f-m ml-1",children:S("Password reset email template")})]}),e.jsx(ce,{dataConf:s,setDataConf:t,type:r,showMdl:u,setshowMdl:j,tamplate:de,title:"Password reset email template"}),e.jsx("br",{}),e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:S("Success Message:")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:p=>b(p),name:"succ_msg",value:(a=s[r])==null?void 0:a.succ_msg,type:"text",placeholder:S("Success Message")})]})]})}function Le({fields:c,dataConf:s,setDataConf:t,pages:i,type:r,status:n}){var b,k,d,v,_;const u=V(z),j=[{key:"user_login",name:"User Name or Email",required:!0},{key:"password",name:"Password",required:!0},{key:"remember",name:"Remember Me",required:!0}],o=m=>{t(a=>F(a,p=>{const{name:x,value:f}=m.target;p[r][x]=f})),u(a=>L(P({},a),{unsaved:!0}))},h=m=>{t(a=>F(a,p=>{p[r].redirect_url=m.target.value})),u(a=>L(P({},a),{unsaved:!0}))};return M.useEffect(()=>{t(m=>F(m,a=>{var p,x,f;(f=(x=(p=a[r])==null?void 0:p.login_map)==null?void 0:x[0])!=null&&f.loginField||(a[r].login_map=j.filter(y=>y.required).map(y=>({formField:"",loginField:y.key,required:y.required})))}))},[]),e.jsxs("div",{style:{width:800,opacity:n===0&&.6,pointerEvents:n===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Login Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Login Fields")})})]})]})}),(k=(b=s[r])==null?void 0:b.login_map)==null?void 0:k.map((m,a)=>e.jsx(D,{i:a,type:"login",field:m,formFields:c,dataConf:s,setDataConf:t,customFields:j},`analytics-m-${a+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m",children:S("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(d=s[r])==null?void 0:d.redirect_url,onChange:h,children:[e.jsx("option",{value:"",children:S("Custom Link")}),i&&i.map((m,a)=>e.jsx("option",{value:m.url,children:m.title},`r-url-${a+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link:"}),e.jsx("input",{onChange:o,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(v=s[r])==null?void 0:v.redirect_url})]})]}),e.jsx("br",{}),e.jsx("div",{className:"f-m",children:"Login Success Message "}),e.jsx("input",{onChange:o,name:"succ_msg",className:"btcd-paper-inp mt-1 w-5",type:"text",value:(_=s[r])==null?void 0:_.succ_msg})]})}const oe=[{key:"user_email",name:"Email",required:!0},{key:"user_login",name:"Username"},{key:"nickname",name:"Nickname"},{key:"display_name",name:"Display Name"},{key:"first_name",name:"First Name"},{key:"last_name",name:"Last Name"},{key:"user_pass",name:"Password"},{key:"user_url",name:"Website"},{key:"description",name:"Biographical Info"}],ee=(c,s,t,i,r)=>{r(n=>F(n,u=>{u[c][s].splice(t,0,{})}))},Ae=(c,s,t,i,r)=>{r(n=>F(n,u=>{u[c][s].length>1&&u[c][s].splice(t,1)}))},J=(c,s,t,i,r,n,u,j)=>{const o=P({},r),h=u==null?void 0:u.find(b=>b.key===t.target.value);if(o[c][s][i].userField==="user_email"&&(h==null?void 0:h.typ)!=="email"){j({show:!0,msg:"should be selected email field.."});return}n(b=>F(b,k=>{k[c][s][i][t.target.name]=t.target.value}))},C=(c,s,t)=>!((c[s]?c[s].filter(r=>!r.formField&&r[t]&&r.required):[]).length>0);function ue({i:c,type:s,formFields:t,field:i,userConf:r,setUserConf:n,customFields:u,setSnackbar:j,fieldType:o,authType:h}){const b=V(z),k={user:{propName:"user_map",fldName:"userField"},meta:{propName:"meta_map",fldName:"metaField"}},{propName:d,fldName:v}=k[s],_=(a,p)=>{const x=fe(r);x[h][d][p].customValue=a.target.value,n(x),b(f=>L(P({},f),{unsaved:!0}))},m=!!u.find(a=>a.key===i[v]&&a.required);return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:a=>J(h,d,a,c,r,n,t,j),children:[e.jsx("option",{value:"",children:l("Select Field")}),o==="file"?t.map(a=>te.includes(a.type)&&e.jsx("option",{value:a.key,children:a.name},`ff-zhcrm-${a.key}`)):t==null?void 0:t.map(a=>!te.includes(a.type)&&e.jsx("option",{value:a.key,children:a.name},`ff-zhcrm-${a.key}`)),o!=="file"&&e.jsx("option",{value:"custom",children:l("Custom...")})]}),i.formField==="custom"&&e.jsx(me,{onChange:a=>_(a,c),label:l("Custom Value"),className:"mr-2",type:"text",value:i.customValue,placeholder:l("Custom Value")}),s!=="meta"?e.jsxs("select",{className:"btcd-paper-inp",name:v,value:i[v]||"",onChange:a=>J(h,d,a,c,r,n,t,j),disabled:m,children:[e.jsx("option",{children:l("Select Field")}),u==null?void 0:u.map(a=>e.jsx("option",{value:a.key,children:`${a.name}`},`${a.key}-1`))]}):e.jsx("input",{className:"btcd-paper-inp",name:v,value:i[v]||"",onChange:a=>J(h,d,a,c,r,n,t,j),type:"text"})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ee(h,d,c,r,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>Ae(h,d,c,r,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(ve,{})})]})]})}function $e({formFields:c,userConf:s,setUserConf:t,pages:i,roles:r,type:n}){var p,x,f,y,A,$,W,w,q,E,I,R;const[u,j]=M.useState({show:!1}),[o,h]=M.useState(!1),[b,k]=M.useState(!1),d=V(z),{css:v}=ne(),_=g=>{t(N=>F(N,T=>{const{name:B,value:K}=g.target;T[n][B]=K})),d(N=>L(P({},N),{unsaved:!0}))},m=g=>{t(N=>F(N,T=>{const{name:B,checked:K}=g.target;K?T[n][B]=!0:delete T[n][B]})),d(N=>L(P({},N),{unsaved:!0}))},a=g=>{t(N=>F(N,T=>{const{value:B}=g.target;T[n].redirect_url=B})),d(N=>L(P({},N),{unsaved:!0}))};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{snack:u,setSnackbar:j}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:l("Field Mappping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("User Fields")})})]})]}),(x=(p=s[n])==null?void 0:p.user_map)==null?void 0:x.map((g,N)=>e.jsx(ue,{i:N,type:"user",field:g,formFields:c,userConf:s,setUserConf:t,customFields:oe,setSnackbar:j,fieldType:"all",authType:"register"},`analytics-m-${N+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var g,N;return ee(n,"user_map",(N=(g=s[n])==null?void 0:g.user_map)==null?void 0:N.length,s,t)},className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsxs("div",{className:"flx",children:[e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(G,{name:"user_notify",onChange:m,title:l("User Email Notification"),checked:!!((f=s[n])!=null&&f.user_notify),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["When this option is enabled, a welcome email will be sent from WordPress after registration.",e.jsx("br",{})]})})]}),e.jsxs("div",{className:"w-5 mt-5 flx",children:[e.jsx(G,{name:"admin_notify",onChange:m,title:l("Admin Email Notification"),checked:!!((y=s[n])!=null&&y.admin_notify),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["If this option is enabled, e-mail will be sent from WordPress to admin.",e.jsx("br",{})]})})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m",children:l("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(A=s[n])==null?void 0:A.redirect_url,onChange:a,children:[e.jsx("option",{value:"",children:l("Custom Link")}),i&&i.map((g,N)=>e.jsx("option",{value:g.url,children:g.title},`r-url-${N+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link"}),e.jsx("input",{onChange:_,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:($=s[n])==null?void 0:$.redirect_url})]})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:l("WP User Role")}),e.jsxs("select",{name:"user_role",onChange:_,value:(W=s[n])==null?void 0:W.user_role,className:"btcd-paper-inp mt-1",children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select User Role"}),r.map((g,N)=>e.jsx("option",{value:g==null?void 0:g.key,children:g==null?void 0:g.name},`acf-${N*2}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:l("Success Messages")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:g=>_(g),name:"succ_msg",value:(w=s[n])==null?void 0:w.succ_msg,type:"text",placeholder:l("Success Message")})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:l("User Approval  Method:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",name:"activation",value:(q=s[n])==null?void 0:q.activation,onChange:_,children:[e.jsx("option",{disabled:!0,selected:!0,value:"",children:l("Select approval method")}),e.jsx("option",{value:"auto_approve",children:"Auto Approve"}),e.jsx("option",{value:"admin_review",children:"Require Admin Review"}),e.jsx("option",{value:"email_verify",children:"Require Email Activation"})]})]}),((E=s[n])==null?void 0:E.activation)==="auto_approve"&&e.jsxs("div",{className:"w-5 ml-2 flx",children:[e.jsx(G,{name:"auto_login",onChange:m,title:l("Auto Login After Registration"),checked:!!((I=s[n])!=null&&I.auto_login),value:!1}),e.jsx(O,{width:250,icnSize:17,className:"ml-1",children:e.jsxs("div",{className:"txt-body",children:["if checked Auto Login, the user login automatically after registration.",e.jsx("br",{})]})})]})]}),((R=s[n])==null?void 0:R.activation)!=="auto_approve"&&e.jsxs("div",{className:"flx  integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 mt-4",children:[e.jsxs("button",{type:"button",className:v(H.btn),onClick:()=>h(!0),children:[e.jsx(Q,{size:18})," ",l("Customize Email templates")]}),e.jsx(ce,{dataConf:s,setDataConf:t,type:n,showMdl:o,setshowMdl:h,title:"Customize Email templates"})]}),e.jsxs("div",{className:"ml-2 mt-4",children:[e.jsxs("button",{type:"button",className:v(H.btn),onClick:()=>k(!0),children:[e.jsx(Q,{size:18})," ",l("Edit verification Messages/Redirect URL")]}),e.jsx(Re,{dataConf:s,setDataConf:t,showMdl:b,setCustomRedirectMdl:k,pages:i,type:n,title:"Edit verification messages"})]})]})]})]})}function Ie({formFields:c,userConf:s,setUserConf:t,type:i}){var u,j;const[r,n]=M.useState([]);return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:l("User Meta Field Mappping")})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Meta Value")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:l("Meta Key")})})]})]}),(j=(u=s[i])==null?void 0:u.meta_map)==null?void 0:j.map((o,h)=>e.jsx(ue,{i:h,type:"meta",field:o,formFields:c,userConf:s,setUserConf:t,customFields:r,fieldType:"meta",authType:"register"},`analytics-m-${h+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>{var o;return ee(i,"meta_map",(o=s==null?void 0:s.meta_map)==null?void 0:o.length,s,t)},className:"icn-btn sh-sm",type:"button",children:"+"})})]})}function Ue({formFields:c,dataConf:s,setDataConf:t,pages:i,type:r,status:n}){const{formID:u}=be(),[j,o]=M.useState({show:!1}),[h,b]=M.useState([]);return X("bitforms_get_wp_roles",{},{fetchCondition:U,onSuccess:k=>b(Object.values(k))}),M.useEffect(()=>{t(k=>F(k,d=>{var v,_,m;(m=(_=(v=d[r])==null?void 0:v.user_map)==null?void 0:_[0])!=null&&m.userField||(d[r].user_map=oe.filter(a=>a.required).map(a=>({formField:"",userField:a.key,required:a.required})))}))},[]),e.jsxs("div",{style:{width:900,opacity:n===0&&.6,pointerEvents:n===0&&"none"},children:[e.jsx(Z,{snack:j,setSnackbar:o}),e.jsx("div",{children:e.jsx($e,{formFields:c,formID:u,userConf:s,setUserConf:t,pages:i,roles:h,type:r})}),e.jsxs("div",{children:[e.jsx(Ie,{formFields:c,formID:u,userConf:s,setUserConf:t,type:r}),e.jsx("br",{})]}),e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:l("Note:")})," ",l("If the Username and Password fields are blank then the user will take the value of the email field as the field and the password will be auto-generated.")]})]})}function ze({fields:c,dataConf:s,setDataConf:t,type:i,pages:r,status:n}){var b,k,d,v,_;const u=V(z),j=[{key:"new_password",name:"New Password",required:!0},{key:"conf_password",name:"Confirm Password",required:!0}],o=m=>{t(a=>F(a,p=>{const{name:x,value:f}=m.target;p[i][x]=f})),u(a=>L(P({},a),{unsaved:!0}))};M.useEffect(()=>{t(m=>F(m,a=>{var p,x,f;(f=(x=(p=a[i])==null?void 0:p.reset_map)==null?void 0:x[0])!=null&&f.resetField||(a[i].reset_map=j.filter(y=>y.required).map(y=>({formField:"",resetField:y.key,required:y.required})))}))},[]);const h=m=>{t(a=>F(a,p=>{p[i].redirect_url=m.target.value})),u(a=>L(P({},a),{unsaved:!0}))};return e.jsxs("div",{style:{width:800,opacity:n===0&&.6,pointerEvents:n===0&&"none"},children:[e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("div",{className:"mt-3 mb-1",children:e.jsx("b",{children:"Login Fields Mapping"})}),e.jsx("div",{className:"btcd-hr"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:S("Reset Password Fields")})})]})]})}),(k=(b=s[i])==null?void 0:b.reset_map)==null?void 0:k.map((m,a)=>e.jsx(D,{i:a,type:"reset",field:m,formFields:c,dataConf:s,setDataConf:t,customFields:j},`analytics-m-${a+9}`)),e.jsx("br",{}),e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("div",{className:"w-5 ",children:[e.jsx("div",{className:"f-m fw-500",children:S("Redirect Page:")}),e.jsxs("select",{className:"btcd-paper-inp mt-1",value:(d=s[i])==null?void 0:d.redirect_url,onChange:m=>h(m),children:[e.jsx("option",{value:"",children:S("Custom Link")}),r&&r.map((m,a)=>e.jsx("option",{value:m.url,children:m.title},`r-url-${a+22}`))]})]}),e.jsxs("div",{className:"w-5 ml-2",children:[e.jsx("div",{className:"f-m fw-500",children:"Link:"}),e.jsx("input",{onChange:o,name:"redirect_url",className:"btcd-paper-inp mt-1",type:"text",value:(v=s[i])==null?void 0:v.redirect_url})]})]}),e.jsx("br",{}),e.jsx("div",{className:"flx integ-fld-wrp",children:e.jsxs("div",{className:"w-5",children:[e.jsx("div",{className:"f-m fw-500",children:S("Success Message:")}),e.jsx("input",{className:"btcd-paper-inp mt-1",onChange:m=>o(m),name:"succ_msg",value:(_=s[i])==null?void 0:_.succ_msg,type:"text",placeholder:S("Success Message")})]})}),e.jsx("br",{})]})}function Ke(){const[c,s]=M.useState(!1),t=ie(Se),[i,r]=M.useState("register"),n=ie(Me),{css:u}=ne(),j=Ne(z),[o,h]=M.useState({register:{user_map:[{}],succ_msg:l("Registration successfully done."),meta_map:[{}],sub:l("Activate Your Account"),body:Pe,acti_succ_msg:l("Your account has been activated successfully.&nbsp;You can now login."),already_activated_msg:l("Your account is already activated!"),invalid_key_msg:l("Sorry! Your URL Is Invalid!!"),reject_success_msg:l("This Requested account has been rejected successfully."),pendingUserSub:l("Your account is pending for admin approval."),pendingUserBody:l("Your account is pending for admin approval. Please wait for admin approval."),adminApprovalSub:l("New User Registration Request"),adminApprovalBody:qe,userRejectionSub:l("Your account has been rejected."),userRejectionBody:l("<p>Your account has been rejected by admin.</p>")},login:{login_map:[{}],succ_msg:l("You have been successfully logged in.")},forgot:{forgot_map:[{}],succ_msg:l("We have e-mailed your password reset link!"),sub:"Email Subject",body:de},reset:{reset_map:[{}],succ_msg:"Your password has been reset!."}}),[b,k]=M.useState([]),[d,v]=M.useState(0),[_,m]=M.useState({show:!1}),a=V(z),{isLoading:p,mutate:x}=X("bitforms_get_auth_set",{formID:n},{fetchCondition:U,onSuccess:w=>{var q,E;h(I=>F(I,R=>{var g,N;R[(g=w[0])==null?void 0:g.integration_name]=JSON.parse((N=w[0])==null?void 0:N.integration_details)})),r((q=w[0])==null?void 0:q.integration_name),v(Number((E=w[0])==null?void 0:E.status))}});X("bitforms_get_all_wp_pages",{},{fetchCondition:U,onSuccess:w=>k(w)});const f=w=>{if(!U)return;const{name:q,value:E}=w.target;r(E);const I=P({},o);I[q]=E,h(I),a(R=>L(P({},R),{unsaved:!0}))},y=w=>{U&&(w.target.checked?v(1):v(0))},A=()=>{var q,E;let w=!0;return i==="register"&&!C(o[i],"user_map","userField")&&(m({show:!0,msg:"Please mapped required fields."}),w=!1),i==="register"&&!((q=o[i])!=null&&q.user_role)&&(m({show:!0,msg:"User Role field is required."}),w=!1),i==="forgot"&&!C(o[i],"forgot_map","forgotField")&&(m({show:!0,msg:"Please mapped required fields."}),w=!1),i==="forgot"&&!((E=o[i])!=null&&E.redirect_url)&&(m({show:!0,msg:"redirect page link is required."}),w=!1),i==="reset"&&!C(o[i],"reset_map","resetField")&&(m({show:!0,msg:"Please mapped required fields."}),w=!1),i==="login"&&!C(o[i],"login_map","loginField")&&(m({show:!0,msg:"Please mapped required fields."}),w=!1),w},$=w=>{if(w.preventDefault(),!U)return;s(!0);const q=F(o,R=>{Object.keys(R).forEach(g=>i!==g&&delete R[g]),R.formId=n,R.type=i,R.status=d});if(!A()){s(!1);return}const I=ye(q,"bitforms_save_auth_settings").then(R=>{R!==void 0&&R.success&&(x(q),s(!1),j())});Fe.promise(I,{success:l("Saved successfully."),loading:l("Saving..."),error:l("Something went wrong, Try again.")})},W=()=>{switch(i){case"login":return e.jsx(Le,{fields:t,dataConf:o,setDataConf:h,pages:b,type:i,status:d});case"forgot":return e.jsx(Ee,{fields:t,dataConf:o,setDataConf:h,pages:b,type:i,status:d});case"reset":return e.jsx(ze,{fields:t,dataConf:o,setDataConf:h,pages:b,type:i,status:d});case"register":return e.jsx(Ue,{formFields:t,dataConf:o,setDataConf:h,pages:b,type:i,status:d})}};return e.jsxs("div",{className:"pos-rel",children:[e.jsx(Z,{snack:_,setSnackbar:m}),e.jsx("h2",{className:"",children:l("WP Authentication")}),e.jsxs("h5",{children:[l("How to setup WP Authentication:")," ",e.jsx("a",{href:le.authSettings.link,target:"_blank",rel:"noreferrer",className:"yt-txt ml-1 mr-1",children:l("YouTube")}),e.jsx("a",{href:le.authSettingsDoc.link,target:"_blank",rel:"noreferrer",className:"doc-txt",children:l("Documentation")})]}),!U&&e.jsx("div",{className:"pro-blur flx",style:{height:"111%",left:-53,width:"104%"},children:e.jsxs("div",{className:"pro",children:[l("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsx("span",{className:"txt-pro",children:l("Premium")})})]})}),p?e.jsx(_e,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):e.jsxs("div",{children:[e.jsx("div",{className:"mt-2",children:e.jsxs("label",{htmlFor:"status",children:[e.jsx("b",{children:l("")}),e.jsx(Y,{radio:!0,name:"type",onChange:f,checked:i==="register",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Registration"})}),value:"register"}),e.jsx(Y,{radio:!0,name:"type",onChange:f,checked:i==="login",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Log In"})}),value:"login"}),e.jsx(Y,{radio:!0,name:"type",onChange:f,checked:i==="forgot",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Forgot Password"})}),value:"forgot"}),e.jsx(Y,{radio:!0,name:"type",onChange:f,checked:i==="reset",title:e.jsx("small",{className:"txt-dp",children:e.jsx("b",{children:"Reset Password"})}),value:"reset"})]})}),e.jsxs("div",{className:"mt-2 ml-1 flx",children:[e.jsx("label",{htmlFor:"status",children:e.jsx("b",{children:l("Enable")})}),e.jsx(we,{action:y,checked:d===1,className:"ml-4 flx"})]}),W(),e.jsxs("button",{type:"button",id:"secondary-update-btn",onClick:$,className:u(H.btn,H.blueGrd,{px:20}),disabled:c,children:[l("Save"),c&&e.jsx(ke,{size:20,clr:"#fff",className:"ml-2"})]}),e.jsx("div",{children:i!=="register"&&e.jsxs("p",{className:"p-1 f-m",children:[e.jsx("strong",{children:l("Note :")})," ",l("When the login, forgot password or reset password any of these feature enabled in the form, the entries will not be saved in the WP database.")]})})]})]})}export{Ke as default};
