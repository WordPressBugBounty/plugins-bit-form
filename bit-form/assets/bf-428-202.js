var I=Object.defineProperty;var y=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var _=(i,c,t)=>c in i?I(i,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[c]=t,j=(i,c)=>{for(var t in c||(c={}))$.call(c,t)&&_(i,t,c[t]);if(y)for(var t of y(c))q.call(c,t)&&_(i,t,c[t]);return i};import{j as e,_ as d,W as M,T as h,u as R,$ as O,e as z}from"./main-861.js";import{i as V,P,u as U}from"./bf-857-79.js";import{ac as B,ad as D}from"./bf-729-81.js";import{h as k,d as E,a as w,b as G,c as T,e as H,f as W}from"./bf-895-201.js";import{r as Z,a as f}from"./bf-926-90.js";import{M as J}from"./bf-528-113.js";function K({i,formFields:c,field:t,sheetConf:a,setSheetConf:r,addressField:m}){const p=t.required,x=m.filter(s=>!s.required);return e.jsxs("div",{className:"flx flx-around mt-2 mr-1",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:s=>k(s,i,a,r),children:[e.jsx("option",{value:"",children:d("Select Field")}),c.map(s=>s.type!=="file-up"&&e.jsx("option",{value:s.key,children:s.name},`ff-zhcrm-${s.key}`))]}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailChimpAddressField",value:t.mailChimpAddressField||"",onChange:s=>k(s,i,a,r),disabled:p,children:[e.jsx("option",{value:"",children:d("Select Field")}),p?Object.values(m).map((s,u)=>e.jsx("option",{value:s.tag,children:s.name},`add-${u*2}`)):Object.values(x).map((s,u)=>e.jsx("option",{value:s.tag,children:s.name},`add-${u*2}`))]}),!p&&e.jsx("button",{onClick:()=>E(i,a,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(M,{})})]})}function Q({sheetConf:i,setSheetConf:c,formFields:t,address:a}){var m,p,x;const r=(s,u)=>{const l=j({},i);u==="update"&&(s.target.checked?l.actions.update=!0:delete l.actions.update),u==="double_opt_in"&&(s.target.checked?l.actions.double_opt_in=!0:delete l.actions.double_opt_in),u==="address"&&(s.target.checked?(l.actions.address=!0,l.address_field=a.filter(b=>b.required).map(b=>({formField:"",mailChimpAddressField:b.tag,required:!0}))):(delete l.actions.address,l.address_field="")),c(j({},l))};return e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(h,{checked:((m=i.actions)==null?void 0:m.address)||!1,onChange:s=>r(s,"address"),className:"wdt-200 mt-4 mr-2",value:"address",title:d("Add Address Field"),subTitle:d("Add Address Field")}),e.jsx(h,{checked:((p=i.actions)==null?void 0:p.double_opt_in)||!1,onChange:s=>r(s,"double_opt_in"),className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:d("Double Opt-in"),subTitle:d("Add Double Opt-in")}),e.jsx(h,{checked:((x=i.actions)==null?void 0:x.update)||!1,onChange:s=>r(s,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:d("Update Mail Chimp"),subTitle:d("Update Responses with MailChimp exist Aduience?")})]})}function X({i,formFields:c,field:t,sheetConf:a,setSheetConf:r}){var x,s,u;const m=R(O),{isPro:p}=m;return e.jsxs("div",{className:"flx mt-2 mr-1",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:t.formField||"",onChange:l=>w(l,i,a,r),children:[e.jsx("option",{value:"",children:d("Select Field")}),e.jsx("optgroup",{label:"Form Fields",children:c.map(l=>l.type!=="file-up"&&e.jsx("option",{value:l.key,children:l.name},`ff-zhcrm-${l.key}`))}),e.jsx("option",{value:"custom",children:d("Custom...")}),e.jsx("optgroup",{label:`General Smart Codes ${p?"":"(PRO)"}`,children:p&&((x=V)==null?void 0:x.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),t.formField==="custom"&&e.jsx(J,{onChange:l=>G(l,i,a,r),label:d("Custom Value"),className:"mr-2",type:"text",value:t.customValue,placeholder:d("Custom Value")}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailChimpField",value:t.mailChimpField||"",onChange:l=>w(l,i,a,r),children:[e.jsx("option",{value:"",children:d("Select Field")}),((u=(s=a.default)==null?void 0:s.fields)==null?void 0:u[a.listId])&&Object.values(a.default.fields[a.listId]).map((l,b)=>e.jsx("option",{value:l.tag,children:l.name},`mchimp-${b*2}`))]})]}),e.jsx("button",{onClick:()=>T(i,a,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>H(i,a,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(M,{})})]})}function le({formID:i,formFields:c,handleInput:t,sheetConf:a,setSheetConf:r,isLoading:m,setisLoading:p,setSnackbar:x,setShowMdl:s}){var b,g,N,v,A,F;const u=[{tag:"addr1",name:"Address 1",required:!0},{tag:"addr2",name:"Address 2",required:!1},{tag:"city",name:"City",required:!0},{tag:"zip",name:"Zip",required:!0},{tag:"state",name:"State",required:!0},{tag:"country",name:"Country",required:!1}],l=n=>{const o=j({},a);n?o.tags=n?n.split(","):[]:delete o.tags,r(j({},o))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-150 d-in-b",children:d("Authorized App:")}),e.jsxs("select",{className:"btcd-paper-inp w-6",value:a.parentAppId,onChange:t,name:"parentAppId",children:[e.jsx("option",{value:"",children:d("Select an App")}),B([a.type]).map(n=>e.jsx("option",{value:n.id,children:n.integration_name},n.id))]}),e.jsx("button",{"aria-label":"Refresh integrations",onClick:()=>D(p,x,a.type),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh connected apps"'},type:"button",disabled:m,children:"↻"}),e.jsx("button",{"aria-label":"Add New",onClick:()=>s(!0),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Add New Authorize App"'},type:"button",disabled:m,children:e.jsx(P,{size:18})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("b",{className:"wdt-150 d-in-b",children:d("Audience List:")}),e.jsxs("select",{onChange:t,name:"listId",value:a.listId,className:"btcd-paper-inp w-6",children:[e.jsx("option",{value:"",children:d("Select Audience List")}),((b=a==null?void 0:a.default)==null?void 0:b.audiencelist)&&Object.keys(a.default.audiencelist).map(n=>e.jsx("option",{value:a.default.audiencelist[n].listId,children:a.default.audiencelist[n].listName},n))]}),e.jsx("button",{onClick:()=>Z(i,a,r,p,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Audience list"'},type:"button",disabled:m,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{style:{marginTop:"15px"},className:"wdt-150 d-in-b",children:d("Tags: ")}),e.jsx(U,{defaultValue:a==null?void 0:a.tags,className:"btcd-paper-drpdwn w-6",options:((g=a==null?void 0:a.default)==null?void 0:g.audienceTags)&&Object.keys(a.default.audienceTags).map(n=>({label:a.default.audienceTags[n].tagName,value:a.default.audienceTags[n].tagName})),onChange:n=>l(n)}),e.jsx("button",{onClick:()=>f(i,a,r,p,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh MailChimp Tags")}'`},type:"button",disabled:m,children:"↻"})]}),m&&e.jsx(z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((v=(N=a.default)==null?void 0:N.fields)==null?void 0:v[a.listId])&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Map Fields")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Mail Chimp Fields")})})]}),a.field_map.map((n,o)=>e.jsx(X,{i:o,field:n,sheetConf:a,formFields:c,setSheetConf:r},`sheet-m-${o+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>T(a.field_map.length,a,r),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),((A=a.actions)==null?void 0:A.address)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Address Field Map")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-1",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Address Fields")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Mail Chimp Address Fields")})})]}),(F=a==null?void 0:a.address_field)==null?void 0:F.map((n,o)=>e.jsx(K,{i:o,field:n,sheetConf:a,formFields:c,setSheetConf:r,addressField:u},`sheet-m-${o+9}`)),e.jsx("div",{className:"txt-center  mt-2",style:{marginRight:85},children:e.jsx("button",{onClick:()=>W(a.address_field.length,a,r),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("br",{}),e.jsx("br",{})]}),a.listId&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:d("Actions")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(Q,{sheetConf:a,setSheetConf:r,formFields:c,address:u})]})]})}export{le as M};
