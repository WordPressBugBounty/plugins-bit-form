var bt=Object.defineProperty,gt=Object.defineProperties;var yt=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var Nt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var Ye=(t,a,h)=>a in t?bt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):t[a]=h,W=(t,a)=>{for(var h in a||(a={}))Nt.call(a,h)&&Ye(t,h,a[h]);if(Ve)for(var h of Ve(a))_t.call(a,h)&&Ye(t,h,a[h]);return t},ke=(t,a)=>gt(t,yt(a));import{u as P,r as c,a as le,j as e,bZ as be,b as ne,L as ge,_ as i,f as ie,bg as vt,$ as te,c as q,g as St,c4 as Dt,d as $e,e as tt,c5 as V,c6 as ye,z as Te,R as st,w as Ee,y as Ct,ag as Me,ak as Ne,aI as at,C as It,aR as kt,as as $t,S as nt,B as pe,x as je,c7 as we,D as wt,c8 as Ft,c9 as it,ca as Fe,cb as lt,aQ as rt,an as ct,cc as Lt,Z as Tt,a1 as Et,v as Mt,q as zt,cd as Ze,a9 as At,aT as Ot,ai as Pt,ao as Ht,am as Rt}from"./main-232.js";import{S as Bt}from"./bf-300-79.js";import{T as Jt,a as Kt,b as fe,c as xe}from"./bf-320-73.js";import{T as Ut}from"./bf-800-117.js";import{T as de,h as Qe}from"./bf-106-80.js";import{C as Xt,d as Gt,F as Wt}from"./bf-820-118.js";/* empty css          */import{D as qt}from"./bf-678-70.js";import{B as Vt}from"./bf-839-120.js";import"./bf-80-121.js";import"./bf-11-122.js";import"./bf-823-123.js";import"./bf-29-124.js";import"./bf-670-125.js";import"./bf-86-126.js";import"./bf-646-127.js";/* empty css          */import"./bf-766-129.js";import"./bf-156-130.js";import"./bf-331-131.js";function Yt(t){const{formID:a,entryID:h,setAllResp:N,setSnackbar:r}=t,y=P(te),[p,C]=c.useState(!1),[_,$]=c.useState(!1),[l,b]=c.useState(!0),[v,I]=c.useState(null),x=c.useRef(null),{css:w}=le();c.useEffect(()=>{C(!0)},[h,a]);const S=B=>{B.preventDefault(),$(!0);const u=x.current.contentWindow,n=u.document,m=n==null?void 0:n.querySelector("form"),o=m.id.slice(m.id.indexOf("-")+1);let k=new FormData(m);console.log("advancedFileHandle= ",typeof u.advancedFileHandle);const J={formID:a,entryID:t.entryID},z=[],H=u.bf_globals[o];typeof u.advancedFileHandle!="undefined"&&(k=u.advancedFileHandle(H,k)),typeof u.decisionFldHandle!="undefined"&&(k=u.decisionFldHandle(H,k)),Object.entries((H==null?void 0:H.fields)||{}).forEach(A=>{var f,O;(O=(f=A[1])==null?void 0:f.valid)!=null&&O.hide&&z.push(A[0])}),z.length&&k.append("hidden_fields",z),q(k,"bitforms_update_form_entry",void 0,J).then(A=>{if(A!==void 0&&A.success){if(A.data.cron||A.data.cronNotOk){const f=A.data.cron||A.data.cronNotOk;if(typeof f=="string"){const O=new URL(f);O.protocol!==window.location.protocol&&(O.protocol=window.location.protocol),fetch(O)}else{const O=new URL(y.ajaxURL);O.searchParams.append("action","bitforms_trigger_workflow");const K={cronNotOk:f,id:`bitforms_${a}`};fetch(O,{method:"POST",body:JSON.stringify(K),headers:{"Content-Type":"application/json"}}).then(Y=>Y.json())}}r({show:!0,msg:A.data.message}),N(f=>St(f,O=>{const K=O.findIndex(Y=>Y.entry_id===t.entryID);O[K]=W(W({},O[K]),A.data.updatedData)})),t.close(!1)}else A.data&&I(A.data)}).finally(()=>$(!1))},E=document.querySelector(".btcd-modal-wrp"),M=E!=null&&E.offsetHeight?E.offsetHeight-150:0;return e.jsxs(be,{hdrActn:e.jsxs("button",{onClick:S,disabled:_,type:"button",className:`${w(ne.btn,ne.blueGrd)} btn-md blue btcd-mdl-hdr-btn`,children:["Update",_&&e.jsx(ge,{size:20,clr:"#fff",className:"ml-2"})]}),lg:!0,show:p,setModal:t.close,title:i("Edit"),children:[l&&e.jsx(ie,{className:w({ta:"center"})}),e.jsx(vt,{autoHide:!0,autoHeight:!0,autoHeightMin:M,autoHeightMax:M,children:e.jsx("iframe",{ref:x,title:"Form Entry Edit",src:`${window.location.origin}/bitform-form-entry-edit/${a}/${h}`,className:w(et.iframe,et.body),onLoad:()=>b(!1)})})]})}const et={iframe:{width:"100%",height:"80vh"},body:{"> body":{height:"80vh"},"> html":{height:"80vh"}}};var re=""+new URL("bf-565-3.svg",import.meta.url).href;function Zt({formID:t,entryID:a,allLabels:h,showForm:N,setShowForm:r,setFetchData:y,data:p,setData:C}){const _=!!p.noteID,{css:$}=le(),[l,b]=c.useState(!1),[v,I]=c.useState(p.title),[x,w]=c.useState(p.content),S=P(Dt),E=n=>{I(n)},M=n=>{w(n)},B=n=>{if(n.preventDefault(),!!x)if(b(!0),_){const m={noteID:p.noteID,formID:t,entryID:a,title:v,content:x};q({},"bitforms_form_entry_update_note","multipart/form-data",m).then(o=>{o!==void 0&&o.success&&($e.success(i("Note Updated Successfully")),u(),y(!0)),b(!1)})}else q({},"bitforms_form_entry_create_note","multipart/form-data",{formID:t,entryID:a,title:v,content:x}).then(o=>{o!==void 0&&o.success&&($e.success(i("Note Added Successfully")),u(),y(!0)),b(!1)})},u=()=>{r(!1),C({title:"",content:""})};return e.jsxs("div",{className:"mt-2 w-7",children:[e.jsxs("b",{children:[_?i("Edit Note "):i("Create New Note "),e.jsx("button",{type:"button",className:$(ne.btn),onClick:()=>_?u():r(!1),style:{fontSize:16},children:"x"})]}),e.jsx("br",{}),e.jsxs("form",{method:"POST",onSubmit:B,onKeyDown:n=>{n.key==="Enter"&&n.target.tagName!=="TEXTAREA"&&n.preventDefault()},children:[e.jsx("input",{type:"text",name:"title",className:"btcd-paper-inp mt-2",placeholder:"Note Title",value:v,onChange:n=>E(n.target.value)}),e.jsx(Ut,{id:"body-content",value:x,onChangeHandler:M,formFields:S}),_&&e.jsx("button",{type:"button",className:`${$(ne.btn)} btn-md mr-2`,onClick:u,children:i("Cancel")}),e.jsxs("button",{type:"submit",className:`${$(ne.btn)} btn-md blue`,disabled:l,children:[_?i("Edit"):i("Add")," ",i("Note"),l&&e.jsx(ge,{size:20,clr:"#fff",className:"ml-2"})]})]})]})}function Qt({formID:t,entryID:a,allLabels:h,rowDtl:N}){const r=P(te),{isPro:y}=r,{css:p}=le(),C=`${r.dateFormat} ${r.timeFormat}`,[_,$]=c.useState(!1),[l,b]=c.useState({show:!1}),[v,I]=c.useState(!1),[x,w]=c.useState([]),[S,E]=c.useState(!1),[M,B]=c.useState(!1),[u,n]=c.useState({title:"",content:""});c.useEffect(()=>{y&&$("allNotes"),E(!0)},[]),c.useEffect(()=>{if(y&&$("allNotes"),M){B(!1);return}y&&q({formID:t,entryID:a},"bitforms_form_entry_get_notes").then(f=>{f!==void 0&&f.success&&w(f.data),$(!1)})},[M,a]),c.useEffect(()=>{u.content&&I(!0)},[u]);const m=f=>{I(!1);const O=x.find(ee=>ee.id===f),{title:K,content:Y}=JSON.parse(O.info_details);n({noteID:f,title:K,content:Y}),I(!0)},o=f=>{l.noteID=f,l.show=!0,b(W({},l))},k=()=>{l.show=!1,b(W({},l))},J=()=>{$("delete"),k(),q({noteID:l.noteID,formID:t,entryID:a},"bitforms_form_entry_delete_note").then(f=>{f!==void 0&&f.success&&($e.success(i("Note Deleted Successfully")),B(!0)),$(!1)})},z=f=>{var ce,X;const O=/\${\w[^ ${}]*}/g,K=((ce=f==null?void 0:f.match)==null?void 0:ce.call(f,O))||"",Y=((X=K==null?void 0:K.filter)==null?void 0:X.call(K,(j,se)=>K.indexOf(j)===se))||[];let ee=f;for(let j=0;j<Y.length;j+=1){const se=Y[j].slice(2,-1);ee=ee.replace(new RegExp(`\\${Y[j]}`,"gi"),se in N?N[se]:"[Field Deleted]")}return ee},H=f=>{const O=JSON.parse(f.info_details),K=_==="delete"&&l.noteID===f.id;return e.jsxs("div",{children:[e.jsxs("div",{children:[f.updated_at?e.jsxs("small",{children:[i("updated on:"),` ${V(f.updated_at,C)}`]}):e.jsxs("small",{children:[i("created at:"),` ${V(f.created_at,C)}`]}),e.jsx("button",{type:"button",className:"icn-btn ml-1 tooltip pos-rel",style:{"--tooltip-txt":`'${i("Edit")}'`,fontSize:16},onClick:()=>m(f.id),children:e.jsx(ye,{size:"15"})}),e.jsxs("button",{type:"button",onClick:()=>o(f.id),className:`${K?p(ne.btn):"icn-btn"} ml-1 tooltip pos-rel`,style:{"--tooltip-txt":`'${i("Delete")}'`,fontSize:16},disabled:K,children:[e.jsx(Te,{size:"15"}),K&&e.jsx(ge,{size:20,clr:"#000",className:"ml-2"})]})]}),e.jsxs("div",{children:[O.title&&e.jsx("h3",{children:O.title}),e.jsx("div",{children:e.jsx(st,{html:z(O.content)})})]}),e.jsx("hr",{className:"btcd-hr"})]},f.id)},A=()=>x.length?x.map(f=>H(f)):S&&e.jsx("img",{src:re,alt:"no data found",style:{height:150,width:"100%"}});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pos-rel",children:[!y&&e.jsx("div",{className:"pro-blur mt-4 flx",children:e.jsxs("div",{className:"pro",children:[i("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsxs("span",{className:"txt-pro",children:[" ",i("Premium")]})})]})}),v?e.jsx(Zt,{formID:t,entryID:a,allLabels:h,showForm:v,setShowForm:I,setFetchData:B,data:u,setData:n}):e.jsx("button",{type:"button",className:p(ne.btn),onClick:()=>I(!0),children:i("create new note")}),_==="allNotes"?e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):A()]}),e.jsxs(tt,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"red",btnTxt:"Ok",show:l.show,close:k,action:J,title:i("Confirmation"),children:[e.jsx("div",{className:"txt-center mt-5 mb-4",children:i("Are you sure to delete this note")}),_&&e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}})]})]})}const es=t=>t!=null&&t.payment_response?JSON.parse(t.payment_response):t!=null&&t.create_time?t:{};function ts({paymentInfo:t,payInfoFound:a}){var _,$,l,b;const h=P(te),N=`${h.dateFormat} ${h.timeFormat}`,r=es(t),y="subscriber"in r,p=y?r.subscriber:r.payer,C=y?($=(_=r==null?void 0:r.billing_info)==null?void 0:_.last_payment)==null?void 0:$.amount:(b=(l=r==null?void 0:r.purchase_units)==null?void 0:l[0])==null?void 0:b.amount;return e.jsx("div",{children:a.current===1?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:i("PayPal")}),e.jsxs("div",{children:[e.jsx("small",{children:V(r.create_time,N)}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:`${i("Type")}: ${y?i("Subscription"):i("Order")}`}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:e.jsx("b",{children:`${i("Transaction ID")}: ${r.id}`})}),e.jsx("h3",{children:`${p.name.given_name} ${p.name.surname}`}),e.jsx("small",{children:p.email_address}),y&&e.jsx("h4",{children:`${i("Plan ID")}: ${r.plan_id}`}),y&&e.jsxs("small",{children:[i("Next Billing Time"),":"," ",V(r.billing_info.next_billing_time,N)]}),e.jsxs("p",{children:[i("Total Paid"),":"," ",C.value," ",C.currency_code]})]},r.id)]}):e.jsx("img",{src:re,alt:i("no data found"),style:{height:150,width:"100%"}})})}const ss=t=>t!=null&&t.payment_response?JSON.parse(t.payment_response):t!=null&&t.created_at?t:{};function as({paymentInfo:t,payInfoFound:a,fldKey:h,transactionID:N}){const r=P(te),{formID:y}=Ee(),p=P(Ct),_=P(Me)[h],{payIntegID:$}=_.options,l=p.find(M=>M.id===$),b=`${r.dateFormat} ${r.timeFormat}`,[v,I]=c.useState(t),[x,w]=c.useState(!1),S=ss(v),E=S.created_at*1e3;return c.useEffect(()=>{a.current===2&&(w(!0),q({formID:y,transactionID:N,razorpaySettings:l},"bitforms_razorpay_transaction_info").then(M=>{M.success&&(I(M.data),a.current=1)}).finally(()=>{w(!1)}))},[]),e.jsxs("div",{children:[x&&e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}),a.current===1?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:i("Razorpay")}),e.jsxs("div",{children:[e.jsx("small",{children:V(E,b)}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:`${i("Status")}: ${S.status}`}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:e.jsx("b",{children:`${i("Transaction ID")}: ${S.id}`})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:`${i("Email")}: ${S.email}`}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:`${i("Contact")}: ${S.contact}`}),e.jsx("br",{}),e.jsxs("p",{children:[i("Total Paid"),":"," ",S.amount/100," ",S.currency]})]})]}):!x&&e.jsx("img",{src:re,alt:i("no data found"),style:{height:150,width:"100%"}})]})}const ns=t=>t!=null&&t.payment_response?JSON.parse(t.payment_response):{};function is({paymentInfo:t,payInfoFound:a}){const h=P(te),N=`${h.dateFormat} ${h.timeFormat}`,r=ns(t);return e.jsx("div",{children:a.current===1?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:i("Stripe")}),e.jsxs("div",{children:[e.jsx("small",{children:V(r.created*1e3,N)}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:e.jsx("b",{children:`${i("Transaction ID")}: ${r.id}`})}),e.jsxs("p",{children:[i("Total Paid"),":"," ",r.amount/100," ",r.currency]})]},r.id)]}):e.jsx("img",{src:re,alt:i("no data found"),style:{height:150,width:"100%"}})})}const ls=t=>t!=null&&t.payment_response?JSON.parse(t.payment_response):{};function rs({paymentInfo:t,payInfoFound:a}){const h=P(te),N=`${h.dateFormat} ${h.timeFormat}`,r=ls(t);return e.jsx("div",{children:a.current===1?e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:i("Mollie")}),e.jsxs("div",{children:[e.jsx("small",{children:V(r.createdAt,N)}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("small",{children:e.jsx("b",{children:`${i("Transaction ID")}: ${r.id}`})}),e.jsxs("p",{children:[i("Total Paid"),":"," ",r.amount.value," ",r.amount.currency]})]},r.id)]}):e.jsx("img",{src:re,alt:i("no data found"),style:{height:150,width:"100%"}})})}function cs({formID:t,rowDtl:a}){const h=P(Ne),N=P(te),{isPro:r}=N,[y,p]=c.useState({}),[C,_]=c.useState(!1),l=h.filter(I=>at.includes(I.type)).find(I=>a[I.key])||{},b=c.useRef(0);c.useEffect(()=>{var I;if(r){_(!0);const x=a==null?void 0:a[l==null?void 0:l.key],w=(I=x==null?void 0:x.split(","))==null?void 0:I[0];q({formID:t,transactionID:w},"bitforms_payment_details").then(S=>{S.success&&S.data.length?(p(S.data[0]),b.current=1):b.current=2}).finally(()=>{_(!1)})}return()=>p({})},[]);const v=()=>{switch(l==null?void 0:l.type){case"paypal":return e.jsx(ts,{paymentInfo:y,payInfoFound:b});case"razorpay":return e.jsx(as,{paymentInfo:y,payInfoFound:b,fldKey:l==null?void 0:l.key,transactionID:a==null?void 0:a[l==null?void 0:l.key]});case"stripe":return e.jsx(is,{paymentInfo:y,payInfoFound:b,fldKey:l==null?void 0:l.key,transactionID:a==null?void 0:a[l==null?void 0:l.key]});case"mollie":return e.jsx(rs,{paymentInfo:y,payInfoFound:b});default:return e.jsx("h1",{children:i("No Payment Info Found!")})}};return e.jsxs("div",{className:"pos-rel",children:[!r&&e.jsx("div",{className:"pro-blur mt-4 flx",children:e.jsxs("div",{className:"pro",children:[i("Available On"),e.jsx("a",{href:"https://www.bitapps.pro/bit-form",target:"_blank",rel:"noreferrer",children:e.jsxs("span",{className:"txt-pro",children:[" ",i("Premium")]})})]})}),C?e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):v()]})}function os({formID:t,entryID:a,integrations:h}){const N=P(te),r=P(Ne),y=`${N.dateFormat} ${N.timeFormat}`,[p,C]=c.useState([]),[_,$]=c.useState([]),[l,b]=c.useState([]),[v,I]=c.useState(!1);c.useEffect(()=>(I(!0),q({formID:t,entryID:a},"bitforms_form_log_history").then(n=>{n!==void 0&&n.success&&(C(n.data),$(n.integrations)),I(!1)}),()=>C([])),[a]);const x=n=>{var A;const m=/\${\w[^ ${}]*}/g,o=/[\]["]/g,k=((A=n.match(m))==null?void 0:A[0])||"",J=k?r.find(f=>`\${${f.key}}`===k):"",z=J?J.adminLbl:"",H=z?n.replace(m,z):"";return H?H.replace(o,""):"Field Deleted"},w=(n,m)=>(n==null?void 0:n.length)>m?`${n.substr(0,m-1)}&hellip;`:n,S=n=>{l.push(n),b([...l])},E=n=>{const m=[...l];m.splice(m.indexOf(n),1),b([...m])},M=n=>{var J;const m=l.find(z=>z===n.id),o={};_.map(z=>{var A;let H=(A=h.find(f=>f.id===z.integration_id))==null?void 0:A.name;if(H)o[H]||(o[H]=[]),n.id===z.log_id&&o[H].push(z);else if(Number(z.integration_id)&&n.id===z.log_id){const f=JSON.parse(z.api_type);H=`${f.type_name} ${f.type}`,H==="ReCaptcha v3"&&(o[H]=[z])}});const k=()=>n.content===null&&n.action_type==="update"?e.jsx("p",{children:i("No field data change")}):n.content===null&&n.action_type==="create"?e.jsx("p",{children:i("Form Submitted")}):n.content.split("b::f").map(z=>e.jsxs("p",{children:[" ",e.jsx(ye,{size:"15"}),x(z)]},z));return e.jsxs("div",{children:[k(),!!((J=Object.keys(o))!=null&&J.length)&&e.jsxs(e.Fragment,{children:[!m&&n.integration&&e.jsx("small",{role:"button",tabIndex:"0",className:"btcd-link",onClick:()=>S(n.id),onKeyDown:()=>S(n.id),children:i("Show Integration Logs")}),m&&n.integration&&e.jsx("small",{role:"button",tabIndex:"0",className:"btcd-link",onClick:()=>E(n.id),onKeyDown:()=>E(n.id),children:i("Hide Integration Logs")}),m&&n.integration&&B(o)]})]})},B=n=>Object.keys(n).map(m=>e.jsxs("div",{children:[e.jsx("h5",{children:`${m} - `}),e.jsx("div",{className:"m-0 ml-6",children:n[m].map(o=>{const k=JSON.parse(o.api_type);return e.jsxs("div",{className:"flx",children:[e.jsx("p",{className:"mr-2",children:`${k.type_name} ${k.type} ${o.response_type}`}),e.jsx(It,{value:o.response_obj,className:"field-key-cpy w-0 ml-0",readOnly:!0})]})})})]})),u=n=>{const m=l.find(k=>k===n.id),o=JSON.parse(n.content);if(n.content!==null)return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[i("Note")," ",n.action_type==="create"&&i("Added"),n.action_type==="update"&&i("Updated"),n.action_type==="delete"&&i("Deleted"),":"]}),o.title&&e.jsx("h4",{children:o.title}),e.jsx("div",{children:e.jsx(st,{html:m?o.content||"":w(o.content||"",20)})}),!m&&(o.content||"").length>20&&e.jsx("small",{role:"button",tabIndex:"0",className:"btcd-link",onClick:()=>S(n.id),onKeyDown:()=>S(n.id),children:i("Read More")}),m&&e.jsx("small",{role:"button",tabIndex:"0",className:"btcd-link",onClick:()=>E(n.id),onKeyDown:()=>E(n.id),children:i("Show Less")})]});if(n.content===null&&n.action_type==="update")return e.jsx("p",{children:i("Note no change")})};return e.jsx(e.Fragment,{children:v?e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):p.map(n=>e.jsxs("div",{children:[e.jsx("br",{}),e.jsx("span",{children:V(n.created_at,y)}),e.jsx("div",{children:n.log_type==="entry"?M(n):u(n)})]},n.id))})}var ds=c.memo(os);function us({rowDtl:t}){var y,p,C,_,$,l,b,v,I,x,w,S,E,M,B,u;const[a,h]=c.useState([]),[N,r]=c.useState(!1);return c.useEffect(()=>{r(!0),q({gclid:t==null?void 0:t.GCLID},"bitforms_get_gclid_info").then(n=>{n!==void 0&&n.success&&n.data[0]&&h(JSON.parse(n.data[0].gclid_response)),r(!1)})},[]),e.jsx(e.Fragment,{children:N?e.jsx(ie,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:70,transform:"scale(0.7)"}}):e.jsx("div",{children:e.jsx("table",{className:"btcd-row-detail-tbl",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Account"}),e.jsx("td",{className:"td",children:(y=a["@attributes"])==null?void 0:y.account})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Campaign ID"}),e.jsx("td",{className:"td",children:(p=a["@attributes"])==null?void 0:p.campaignID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"AdGroup Id"}),e.jsx("td",{className:"td",children:(C=a["@attributes"])==null?void 0:C.adGroupID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad Id"}),e.jsx("td",{className:"td",children:(_=a["@attributes"])==null?void 0:_.adID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Keyword Id"}),e.jsx("td",{className:"td",children:($=a["@attributes"])==null?void 0:$.keywordID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Keyword"}),e.jsx("td",{className:"td",children:(l=a["@attributes"])==null?void 0:l.CriteriaParameters})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Match type"}),e.jsx("td",{className:"td",children:(b=a["@attributes"])==null?void 0:b.KeywordMatchType})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Click type"}),e.jsx("td",{className:"td",children:(v=a["@attributes"])==null?void 0:v.clickType})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Device Type"}),e.jsx("td",{className:"td",children:(I=a["@attributes"])==null?void 0:I.device})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Search Partner Network"}),e.jsx("td",{className:"td",children:(x=a["@attributes"])==null?void 0:x.networkWithSearchPartners})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad Campaign Name"}),e.jsx("td",{className:"td",children:(w=a["@attributes"])==null?void 0:w.campaign})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad group Name"}),e.jsx("td",{className:"td",children:(S=a["@attributes"])==null?void 0:S.adGroup})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad Network"}),e.jsx("td",{className:"td",children:(E=a["@attributes"])==null?void 0:E.network})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Ad Click Date"}),e.jsx("td",{className:"td",children:(M=a["@attributes"])==null?void 0:M.day})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"Customer ID"}),e.jsx("td",{className:"td",children:(B=a["@attributes"])==null?void 0:B.customerID})]}),e.jsxs("tr",{className:"txt-dp",children:[e.jsx("td",{className:"td",children:"GCLID"}),e.jsx("td",{className:"td",children:(u=a["@attributes"])==null?void 0:u.googleClickID})]})]})})})})}function ms({entryID:t,rowDtl:a,setSnackbar:h,close:N}){const r=P(kt),y=P(Ne),p=P($t),C=y.filter(_=>at.includes(_.type));return e.jsxs(Jt,{selectedTabClassName:"s-t-l-active",children:[e.jsxs(Kt,{className:"flx m-0",children:[!!(C!=null&&C.length)&&e.jsx(fe,{className:"btcd-s-tab-link",children:i("Payment")}),e.jsx(fe,{className:"btcd-s-tab-link",children:i("Timeline")}),e.jsx(fe,{className:"btcd-s-tab-link",children:i("Notes")}),!!(a!=null&&a.GCLID)&&e.jsx(fe,{className:"btcd-s-tab-link",children:i("Google Ads Information")})]}),!!(C!=null&&C.length)&&e.jsx(xe,{children:e.jsx(cs,{formID:r,rowDtl:a})}),e.jsx(xe,{children:e.jsx(ds,{formID:r,entryID:t,integrations:p})}),e.jsx(xe,{children:e.jsx(Qt,{formID:r,entryID:t,allLabels:y,setSnackbar:h,rowDtl:a})}),!!(a!=null&&a.GCLID)&&e.jsx(xe,{children:e.jsx(us,{rowDtl:a})})]})}var ot=c.memo(ms);function hs({entryID:t,rowDtl:a,setSnackbar:h,close:N}){return e.jsx(be,{lg:!0,show:!0,setModal:N,title:i("Related Info"),children:e.jsx(ot,{entryID:t,rowDtl:a,setSnackbar:h,close:N})})}function fs({size:t}){return e.jsx("svg",{width:t,height:t,viewBox:"0 0 48 48",children:e.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",children:[e.jsx("path",{d:"M42 27C42 33 38 43 24 43C10 43 6 33 6 27"}),e.jsx("path",{d:"M24.0078 5.10059V33.0001"}),e.jsx("path",{d:"M12 17L24 5L36 17"})]})})}function xs({showExportMdl:t,close:a,cols:h,formID:N,report:r}){var B,u,n,m;const[y,p]=c.useState({show:!1}),[C,_]=c.useState(!1),{css:$}=le(),[l,b]=c.useState({fileFormate:"csv",sort:"ASC",sortField:"bitforms_form_entry_id",limit:null,custom:"all",formId:N,selectedField:""});r&&((u=(B=r[r.length-1])==null?void 0:B.details)==null||u.order);const v=r?(m=(n=r[r.length-1])==null?void 0:n.details)==null?void 0:m.hiddenColumns:[],I=h.filter(o=>o.Header!=="#"&&typeof o.Header!="object"),x=[],w=[];let S=0;I.map(o=>{v!=null&&v.includes(o.accessor)||(x[S]={key:o.accessor,val:o.Header},w[S]=o.accessor,S+=1)}),l.selectedField=JSON.stringify(w);const E=o=>{o.preventDefault(),_(!0),q({data:l},"bitforms_filter_export_data").then(k=>{var J;if(k!==void 0&&k.success)if(((J=k.data)==null?void 0:J.count)!==0){const z=[];z[0]="Entry ID",x.map((f,O)=>{z[O+1]=f.val});const H=XLSX.utils.json_to_sheet(k.data),A=XLSX.utils.book_new();XLSX.utils.sheet_add_aoa(H,[z]),XLSX.utils.book_append_sheet(A,H),XLSX.writeFile(A,`bitform ${N}.${l==null?void 0:l.fileFormate}`)}else p({show:!0,msg:i("no response found")});_(!1)})},M=(o,k)=>{const J=W({},l);typeof k=="number"?J[o]=Number(k):J[o]=k,b(J)};return e.jsxs("div",{children:[e.jsx(nt,{snack:y,setSnackbar:p}),e.jsx(be,{md:!0,show:t,setModal:a,title:"Export Data",style:{overflow:"auto"},children:e.jsxs("div",{children:[e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("How many rows to export")}),e.jsxs("select",{className:"btcd-paper-inp ml-2",name:"custom",style:{width:250},onChange:o=>M(o.target.name,o.target.value),value:l.custom||"",children:[e.jsx("option",{disabled:!0,value:"0",children:"Choose option"}),e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),l.custom==="custom"&&e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("Enter row number")}),e.jsx("input",{"aria-label":"Export Row Number",type:"text",style:{width:250},name:"limit",onChange:o=>M(o.target.name,o.target.value),className:"btcd-paper-inp mt-2",placeholder:"Export Row Number",value:l.limit||""})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("Sort Order")}),e.jsxs("select",{className:"btcd-paper-inp ml-2",name:"sort",style:{width:250},value:l.sort||"ASC",onChange:o=>M(o.target.name,o.target.value),children:[e.jsx("option",{value:"ASC",children:"Ascending"}),e.jsx("option",{value:"DESC",children:"Descending"})]})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("Sort by")}),e.jsxs("select",{className:"btcd-paper-inp ml-2",name:"sortField",value:l.sortField||"bitforms_form_entry_id",onChange:o=>M(o.target.name,o.target.value),style:{width:250},children:[e.jsx("option",{value:"bitforms_form_entry_id",children:"ID"}),x.map(o=>e.jsx("option",{value:o.key,children:o.val},o.key))]})]}),e.jsxs("div",{className:"mt-3 flx",children:[e.jsx("b",{style:{width:200},children:i("Export File Format")}),e.jsxs("select",{className:"btcd-paper-inp ml-2",name:"fileFormate",value:l.fileFormate||"csv",style:{width:250},onChange:o=>M(o.target.name,o.target.value),children:[e.jsx("option",{value:"csv",children:"CSV"}),e.jsx("option",{value:"xlsx",children:"Xlsx"}),e.jsx("option",{value:"xls",children:"Xls"}),e.jsx("option",{value:"fods",children:"Fods"}),e.jsx("option",{value:"ods",children:"Ods"}),e.jsx("option",{value:"prn",children:"Prn"}),e.jsx("option",{value:"txt",children:"Text"}),e.jsx("option",{value:"html",children:"Html"}),e.jsx("option",{value:"eth",children:"Eth"})]})]}),e.jsxs(pe,{onClick:o=>E(o),disabled:C,className:$(je.mt1),size:"sm",children:[i("Export"),C&&e.jsx(ge,{size:20,clr:"#fff",className:"ml-2"})]})]})})]})}function ps({formID:t,cols:a,report:h}){const[N,r]=c.useState(!1),{css:y}=le(),p=()=>{r(!0)};return e.jsxs("div",{children:[e.jsx(xs,{showExportMdl:N,close:r,formID:t,cols:a,report:h}),e.jsx(de,{msg:i("Export Form Data"),children:e.jsx("button",{onClick:p,className:y(we.tableActionBtn),type:"button",children:e.jsx(fs,{size:"16"})})})]})}function Le(t){return e.jsxs("div",{className:"btcd-t-link flx mr-2 prevent-drawer",children:[e.jsx("div",{className:"tooltip",style:{"--tooltip-txt":`"${t.fname}"`,width:`${t.width?t.width:"80"}px`},children:e.jsxs("a",{href:`${t.link}`,rel:"noopener noreferrer",target:"_blank",className:"prevent-drawer",children:[e.jsx(wt,{size:"30"})," ",t.fname]})}),e.jsx("a",{title:"Download",target:"_blank",href:`${t.link}&download`,download:!0,rel:"noopener noreferrer","aria-label":"Download",className:"icn-btn icn-btn-sm flx prevent-drawer",children:e.jsx(Ft,{size:"15"})})]})}function js(t){const{formID:a}=Ee(),h=P(Me),{title:N,rptData:r,entryId:y}=t,p=it(r)?JSON.parse(r):[],_=Object.keys(p[0]||[]).filter(b=>{var v;return!["divider","image","title"].includes((v=h[b])==null?void 0:v.typ)}).map(b=>{var I;const v=h[b]||{};return W({Header:v.adminLbl||v.lbl||v.fieldName||b,accessor:b,fieldType:v.typ,minWidth:50},((I=v.typ)==null?void 0:I.match(/^(file-up|check|select|image-select)$/))&&{Cell:x=>{if(x.cell.value!==null&&x.cell.value!==void 0&&x.cell.value!==""){if(v.typ==="file-up")return e.jsx(e.Fragment,{children:Fe(x.cell.value).map((w,S)=>e.jsx(Le,{fname:w,link:`${bits.baseDLURL}formID=${a}&entryID=${y}&fileID=${w}`},`file-n-${x.cell.row.index+S}`))});if(v.typ==="check"||v.typ==="select"||v.typ==="image-select")try{if(Array.isArray(x.cell.value))return x.cell.value.join(", ");const w=typeof x.cell.value=="string"&&x.cell.value.length>0&&x.cell.value[0]==="["?JSON.parse(x.cell.value):x.cell.value!==void 0&&x.cell.value.split(",");return w.map((S,E)=>E<w.length-1?`${S},`:S)}catch(w){return x.cell.value}return x.cell.value}return null}})})||[],$=!1,l=p.length;return e.jsx(be,{lg:!0,show:!0,setModal:t.close,title:i(`${N} Data List`),children:e.jsx(lt,{className:"f-table btcd-entries-f",height:"76vh",columns:_,data:p,loading:$,countEntries:l,resizable:!0})})}function bs({fetchData:t}){const a=P(ct),h={startDate:"",endDate:"",key:"date"},[N,r]=c.useState(h),{css:y}=le(),p=c.useRef(!1),C=()=>{p.current=!0,_(N),Qe()},_=b=>{const{startDate:v,endDate:I}=b,x=v?V(v,"Y-m-d"):"",w=I?V(I,"Y-m-d"):"",S={start_date:x,end_date:w},{pageIndex:E,pageSize:M,sortBy:B,filters:u,globalFilter:n,conditions:m}=a.details;t({pageIndex:E,pageSize:M,sortBy:B,filters:u,globalFilter:n,conditions:m,entriesFilterByDate:S})},$=()=>{r(h),_(h),p.current=!1,Qe()},l=b=>b&&isFinite(b);return e.jsx("div",{className:"mr-2",children:e.jsxs(qt,{children:[e.jsxs("div",{className:"flx",children:[p.current&&l(N.startDate)&&l(N.endDate)&&e.jsxs("div",{className:"btcd-custom-date-range white ml-2",children:[e.jsxs("span",{className:"m-a",children:[" ",`${V(N.startDate,"Y-m-d")} - ${V(N.endDate,"Y-m-d")}`]}),e.jsx("button",{"aria-label":"Close",type:"button",className:"icn-btn",onClick:$,children:e.jsx(rt,{size:"12"})})]}),e.jsx(de,{msg:i("Filter Entries between Dates"),children:e.jsx("button",{"aria-label":"Fitler",className:y(we.tableActionBtn,je.ml2),style:{"--tooltip-txt":`'${i("Filter")}'`},type:"button",children:e.jsx(Xt,{size:"16"})})})]}),e.jsxs("div",{style:{minHeight:"200px !important"},className:y(we.dataRange),children:[e.jsx(Gt.DateRange,{onChange:b=>r(b.date),moveRangeOnFirstSelection:!1,retainEndDateOnFirstSelection:!0,editableDateInputs:!0,ranges:[N],maxDate:new Date,showSelectionPreview:!1,showDateDisplay:!0,startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",direction:"horizontal"}),e.jsxs("div",{className:y({flx:"",jc:"end",pt:8,pb:6}),children:[e.jsx(pe,{className:y(je.mr1),size:"sm",onClick:C,children:i("Search")}),e.jsx(pe,{variant:"primary-outline",size:"sm",onClick:$,children:i("Clear")})]})]})]})})}function gs(t){return e.jsxs("div",{className:"btcd-drawer",style:{right:t.show?0:-620,width:600},children:[e.jsxs("div",{className:"flx flx-between",children:[e.jsx("div",{className:"btcd-drawer-title",children:t.title}),e.jsxs("div",{className:"flx",children:[e.jsx("button",{onClick:t.relatedinfo,className:"icn-btn btcd-icn-lg tooltip",style:{"--tooltip-txt":'"Related Info"'},"aria-label":"icon-btn",type:"button",children:e.jsx(Lt,{size:"15"})}),e.jsx("button",{onClick:t.editData,className:"icn-btn btcd-icn-lg tooltip",style:{"--tooltip-txt":'"Edit"'},"aria-label":"icon-btn",type:"button",children:e.jsx(ye,{size:"15"})}),e.jsx("button",{onClick:t.delConfMdl,className:"icn-btn btcd-icn-lg tooltip",style:{"--tooltip-txt":'"Delete"'},"aria-label":"icon-btn",type:"button",children:e.jsx(Te,{size:"15"})}),e.jsx("button",{onClick:()=>t.close(!1),className:"icn-btn btcd-icn-lg tooltip",style:{"--tooltip-txt":'"Close"'},"aria-label":"modal-close",type:"button",children:e.jsx(rt,{size:"14",stroke:"3"})})]})]}),e.jsx("small",{className:"btcd-mdl-subtitle",children:t.subTitle}),e.jsx("div",{className:"btcd-mdl-div"}),t.children]})}function ys(t){return e.jsx("div",{className:"btcd-t-action-wrp flx",children:e.jsxs("div",{className:"btcd-t-action",children:["dup"in t&&e.jsx(de,{msg:"Duplicate",children:e.jsx("button",{onClick:t.dup,className:"icn-btn btcd-hid-icn","aria-label":"action btn",type:"button",children:e.jsx(Tt,{size:"15"})})}),"del"in t&&e.jsx(de,{msg:"Delete",children:e.jsx("button",{onClick:t.del,className:"icn-btn btcd-hid-icn","aria-label":"action btn",type:"button",children:e.jsx(Te,{size:"15",stroke:"3"})})}),"edit"in t&&e.jsx(de,{msg:"Edit",children:e.jsx("button",{onClick:t.edit,className:"icn-btn btcd-hid-icn","aria-label":"action btn",type:"button",children:e.jsx(ye,{size:"15"})})}),e.jsx("button",{className:"icn-btn btcd-ph-btn","aria-label":"action btn",type:"button",children:e.jsx(Vt,{size:"15"})})]})})}function Ns({allResp:t,setAllResp:a,isloading:h}){var Be,Je,Ke,Ue,Xe,Ge;const N=P(Ne),r=P(Ot),[y,p]=c.useState({show:!1,msg:""}),[C,_]=c.useState(h),{formType:$,formID:l}=Ee(),b=c.useRef(0),[v,I]=c.useState(0),[x,w]=c.useState(!1),[S,E]=c.useState(!1),[M,B]=c.useState(null),[u,n]=c.useState({show:!1,data:{}}),[m,o]=c.useState({show:!1}),[k,J]=c.useState({show:!1}),[z,H]=c.useState([]),[A,f]=c.useState([]),O=Et(Pt),[K,Y]=c.useState(0),[ee,ce]=c.useState(0),X=P(te),j=P(ct),se=P(Ht),ze=P(Rt),dt=ze.findIndex(s=>{var D;return(s==null?void 0:s.id)&&s.id.toString()===((D=se==null?void 0:se.id)==null?void 0:D.toString())}),Ae=c.useRef(0),ut=Mt(),{css:_e}=le(),mt=P(Me),Oe=["divider","shortcode","image","title","section"];c.useEffect(()=>{var R,d;const s=Object.entries(r).reduce((g,[T,L])=>{var F;return((F=mt[T])==null?void 0:F.typ)!=="repeater"||L.lg.forEach(G=>{g.push(G.i)}),g},[]),D=N.filter(g=>!s.includes(g.key));if(j){const g={};D.map(L=>{g[L.key]=L});const T=[];(d=(R=j.details)==null?void 0:R.order)==null||d.forEach(L=>{L&&L!=="sl"&&L!=="selection"&&L!=="table_ac"&&g[L]!==void 0&&T.push(g[L])}),He(T.length?T:D)}else D.length&&He(D)},[N,r]);const oe=c.useCallback(()=>{m.show=!1,o(W({},m))},[m]),ve=c.useCallback((s,D,R)=>{const d=[],g=[];if(typeof s[0]=="object")for(let F=0;F<s.length;F+=1)d[s[F].original.entry_id]=s[F].id,g.push(s[F].original.entry_id);else d[s.original.entry_id]=s.id,g.push(s.original.entry_id);const T=zt(D);q({formID:l,entries:g},"bitforms_duplicate_form_entries").then(F=>{var G,U;if(F.success&&F.data.message!=="undefined"){if(R&&R.fetchData&&R.data)R.fetchData(R.data);else{let Z;(U=Object.entries(((G=F==null?void 0:F.data)==null?void 0:G.details)||{}))==null||U.forEach(([ae,me])=>{Z=JSON.parse(JSON.stringify(T[d[ae]])),Z.entry_id=me,T[d[ae]].entry_id=ae,T.unshift(Z),T.pop()}),a(T)}p({show:!0,msg:F.data.message})}})},[]),Pe=c.useCallback((s,D,R)=>{m.btnTxt=i("Duplicate"),m.btnClass="blue",m.body=i("Are you sure to duplicate this entry?"),m.action=()=>{ve(s,D,R),oe()},m.show=!0,o(W({},m))},[ve,oe,m]),Se=c.useCallback(()=>{n(ke(W({},u),{show:!1}))},[u]),De=c.useCallback((s,D)=>{const R=[],d=[];if(typeof s[0]=="object")for(let T=0;T<s.length;T+=1)R.push(s[T].id),d.push(s[T].original.entry_id);else R.push(s.id),d.push(s.original.entry_id);q({formID:l,entries:d},"bitforms_bulk_delete_form_entries").then(T=>{T.success&&(D&&D.fetchData&&D.data&&D.fetchData(D.data),p({show:!0,msg:T.data.message}))})},[]),Ce=c.useCallback((s,D)=>{s.idx!==void 0&&(s.id=s.idx,s.original=s.data[0].row.original),m.btnTxt="Delete",m.body="Are you sure to delete this entry",m.btnClass="",m.action=()=>{De(s,D),oe(),Se()},m.show=!0,o(W({},m))},[oe,Se,m,De]),He=(s=[])=>{const D=s==null?void 0:s.map(d=>W({Header:d.adminLbl||d.name||d.key,accessor:d.key,fieldType:d.type,minWidth:50},"type"in d&&d.type.match(/^(file-up|advanced-file-up|signature|check|select|sys|repeater|image-select)$/)&&{Cell:g=>{var T;if(g.cell.value!==null&&g.cell.value!==void 0&&g.cell.value!==""){if(d.type==="file-up"||d.type==="advanced-file-up"||d.type==="signature")return e.jsx(e.Fragment,{children:Fe(g.cell.value).map((L,F)=>e.jsx(Le,{fname:L,link:`${X.baseDLURL}formID=${l}&entryID=${g.cell.row.original.entry_id}&fileID=${L}`},`file-n-${g.cell.row.index+F}`))});if(d.type==="repeater")return e.jsx("a",{href:"",onClick:L=>{L.preventDefault(),J({show:!0,data:g.cell.value,entryId:g.cell.row.original.entry_id,title:d.adminLbl||d.name||d.key})},children:i("View Repeater Data")});if(d.type==="check"||d.type==="select"||d.type==="image-select")try{const L=typeof g.cell.value=="string"&&g.cell.value.length>0&&g.cell.value[0]==="["?JSON.parse(g.cell.value):g.cell.value!==void 0&&g.cell.value.split(",");return L.map((F,G)=>G<L.length-1?`${F},`:F)}catch(L){return g.cell.value}if(d.key==="__user_id")return(T=X==null?void 0:X.user[g.cell.value])!=null&&T.url?e.jsx("a",{href:X.user[g.cell.value].url,children:X.user[g.cell.value].name}):null;if(d.key==="__entry_status"){const L=Number(g.cell.value);return Re(L)}return d.key==="__user_ip"&&isFinite(Number(g.cell.value))?Ze(g.cell.value):g.cell.value}return null}}));D.unshift({Header:"#",accessor:"sl",Cell:d=>e.jsx(e.Fragment,{children:Number(d.state.pageIndex*d.state.pageSize)+Number(d.row.id)+1}),width:40}),D.push({id:"t_action",width:70,maxWidth:70,minWidth:70,sticky:"right",Header:e.jsx("span",{className:"ml-2",title:i("Settings"),children:e.jsx(Bt,{size:"20"})}),accessor:"table_ac",Cell:d=>e.jsx(ys,{edit:()=>ue(d.row),del:()=>Ce(d.row,{fetchData:d.fetchData,data:{pageIndex:d.state.pageIndex,pageSize:d.state.pageSize,sortBy:d.state.sortBy,filters:d.state.filters,globalFilter:d.state.globalFilter}}),dup:()=>Pe(d.row,d.data,{fetchData:d.fetchData,data:{pageIndex:d.state.pageIndex,pageSize:d.state.pageSize,sortBy:d.state.sortBy,filters:d.state.filters,globalFilter:d.state.globalFilter}})})});const R=xt(D);H(R),f(D)},Re=s=>{if(s===0)return"Read";if(s===1)return"Unread";if(s===2)return"Unconfirmed";if(s===3)return"Confirmed";if(s===9)return"Draft"},ue=c.useCallback(s=>{s.idx!==void 0&&(s.id=s.idx,s.original=s.data[0].row.original),B(s.original.entry_id),w(!0)},[]),ht=s=>{s.idx!==void 0&&(s.id=s.idx,s.original=s.data[0].row.original),B(s.original.entry_id),E(!0)},Ie=c.useCallback(({pageSize:s,pageIndex:D,sortBy:R,filters:d,globalFilter:g,conditions:T,entriesFilterByDate:L})=>{if(ee){ce(0),_(!0);return}const F=++b.current;if(t.length<1&&_(!0),F===b.current){const G=s*D;q({id:l,offset:G,pageSize:s,sortBy:R,filters:d,globalFilter:g,conditions:T,entriesFilterByDate:L},"bitforms_get_form_entries").then(U=>{U!=null&&U.success&&(I(Math.ceil(U.data.count/s)),Y(U.data.count),a(U.data.entries)),O(Z=>At(Z,{type:"update",data:{formID:l,entries:U.data.count}})),_(!1)})}},[Ce,Pe,ue,l,ee]),ft=c.useCallback((s,D,R,d)=>{var T,L;const g=s.target.parentElement.children[1].textContent;if(Ae.current=g,!s.target.classList.contains("prevent-drawer")){const F=W({},u);F.show&&u.idx===R?F.show=!1:(F.data=D,F.idx=R,F.show=!0),n(W({},F));const G=D.find(U=>U.column.id==="__entry_status");if(G&&G.value==="1"){const U=(L=(T=G.row)==null?void 0:T.original)==null?void 0:L.entry_id;if(!U)return;q({formId:l,entryId:U},"bitforms_entry_status_update").then(Z=>{if(Z.success){const{fetchData:ae}=d;setTimeout(()=>ae(j.details),1e3)}})}}},[u]),xt=s=>s.filter(D=>!Oe.includes(D.fieldType)),pt=()=>A.filter(s=>!["sl","table_ac"].includes(s.accessor)&&!Oe.includes(s.fieldType)),jt=s=>{var D,R,d,g,T,L,F,G,U,Z,ae,me,We,qe;if(s.fieldType==="file-up"||s.fieldType==="advanced-file-up"||s.fieldType==="signature")return(R=Fe((D=t[u.idx])==null?void 0:D[s.accessor]))==null?void 0:R.map((Q,he)=>e.jsx(Le,{fname:Q,width:"100",link:`${X.baseDLURL}formID=${l}&entryID=${t[u.idx].entry_id}&fileID=${Q}`},`file-n-${he+1.1}`));if(s.fieldType==="repeater")return e.jsx("a",{href:"#",onClick:Q=>{var he;Q.preventDefault(),J({show:!0,data:(he=t[u.idx])==null?void 0:he[s.accessor],entryId:t[u.idx].entry_id,title:s.Header})},children:i("View Repeater Data")});if(s.fieldType==="color")return e.jsxs("div",{className:"flx",children:[t[u.idx][s.accessor],e.jsx("span",{style:{background:t[u.idx][s.accessor],height:20,width:20,borderRadius:5,display:"inline-block",marginLeft:10}})]});if(s.fieldType==="check"||s.fieldType==="select"||s.fieldType==="image-select"){const Q=it((d=t[u.idx])==null?void 0:d[s.accessor])?JSON.parse((g=t[u.idx])==null?void 0:g[s.accessor]):(L=(T=t[u.idx])==null?void 0:T[s.accessor])==null?void 0:L.replace(/\[|\]|"/g,"");return Array.isArray(Q)?Q.toString():Q}if(s.accessor==="__user_id")return(G=X==null?void 0:X.user[(F=t[u.idx])==null?void 0:F[s.accessor]])!=null&&G.url?e.jsx("a",{href:X.user[(U=t[u.idx])==null?void 0:U[s.accessor]].url,children:X.user[(Z=t[u.idx])==null?void 0:Z[s.accessor]].name}):null;if(s.accessor==="__user_ip"&&isFinite((ae=t[u.idx])==null?void 0:ae[s.accessor]))return Ze((me=t[u.idx])==null?void 0:me[s.accessor]);if(s.accessor==="__entry_status"){const Q=Number((We=t[u.idx])==null?void 0:We[s.accessor]);return Re(Q)}return(qe=t==null?void 0:t[u.idx])==null?void 0:qe[s.accessor]};return e.jsxs("div",{id:"form-res",children:[e.jsx(nt,{snack:y,setSnackbar:p}),e.jsx(tt,{show:m.show,close:oe,btnTxt:m.btnTxt,btnClass:m.btnClass,body:m.body,action:m.action}),x&&e.jsx(Yt,{close:w,formID:l,entryID:M,allResp:t,setAllResp:a,setSnackbar:p}),S&&e.jsx(hs,{close:E,entryID:M,setSnackbar:p,rowDtl:t[u.idx]}),e.jsx(gs,{title:i(`Response Details #${Ae.current}`),show:u.show,close:Se,relatedinfo:()=>ht(u),delConfMdl:()=>Ce(u,u.fetchData),editData:()=>ue(u),rowDetails:u,children:e.jsxs("div",{children:[e.jsx("table",{className:"btcd-row-detail-tbl",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"txt-dp",children:[e.jsx("th",{children:i("Title")}),e.jsx("th",{children:i("Value")})]}),u.show&&pt().map((s,D)=>e.jsxs("tr",{children:[e.jsx("th",{children:s.Header}),e.jsx("td",{children:jt(s)})]},`rw-d-${D+2}`))]})}),e.jsx("hr",{}),((Ke=(Je=(Be=u.data[0])==null?void 0:Be.row)==null?void 0:Je.original)==null?void 0:Ke.entry_id)&&e.jsx("div",{className:_e({mxh:"80vh",ow:"scroll"}),children:e.jsx(ot,{close:E,entryID:(Ge=(Xe=(Ue=u.data[0])==null?void 0:Ue.row)==null?void 0:Xe.original)==null?void 0:Ge.entry_id,setSnackbar:p,rowDtl:t[u.idx]})})]})}),k.show&&e.jsx(js,{close:()=>J(s=>ke(W({},s),{show:!1})),rptData:k.data,show:k.show,entryId:k.entryId,title:k.title}),e.jsxs("div",{className:"forms",children:[e.jsx(lt,{className:"f-table btcd-entries-f",height:"76vh",columns:z,data:t,loading:C,countEntries:K,rowSeletable:!0,resizable:!0,columnHidable:!0,hasAction:!0,rowClickable:!0,leftHeader:e.jsx(Wt,{fetchData:Ie,setRefreshResp:ce}),leftHeaderClasses:_e(ne.leftHeader),rightHeader:e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:_e(je.mr2),size:"sm",onClick:()=>ut(`/form/report-view/${$}/${l}`),children:i("View Analytics Report")}),e.jsx(ps,{data:t,cols:A,formID:l,report:ze}),e.jsx(bs,{fetchData:Ie})]}),initialState:{pageIndex:0,hiddenColumns:j&&"details"in j&&typeof j.details=="object"&&"hiddenColumns"in j.details?j.details.hiddenColumns:[],pageSize:j&&"details"in j&&typeof j.details=="object"&&"pageSize"in j.details?j.details.pageSize:10,sortBy:j&&"details"in j&&typeof j.details=="object"&&"sortBy"in j.details?j.details.sortBy:[],filters:j&&"details"in j&&typeof j.details=="object"&&"filters"in j.details?j.details.filters:[],globalFilter:j&&"details"in j&&typeof j.details=="object"&&"globalFilter"in j.details?j.details.globalFilter:"",columnOrder:j&&"details"in j&&typeof j.details=="object"&&"order"in j.details?j.details.order:[],conditions:j&&"details"in j&&typeof j.details=="object"&&"conditions"in j.details?j.details.conditions:[]},formID:l,setTableCols:H,fetchData:Ie,setBulkDelete:De,duplicateData:ve,pageCount:v,edit:ue,onRowClick:ft,refreshResp:ee,report:dt||0}),!C&&t.length===0&&e.jsxs("div",{className:"btcd-no-data txt-center",children:[e.jsx("img",{src:re,alt:"no data found"}),e.jsx("div",{className:"mt-2 data-txt",children:i("No Response Found.")})]})]})]})}var Js=c.memo(Ns);export{Js as default};
